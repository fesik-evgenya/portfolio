{% extends "base.html" %}

{% block content %}
<div class="container project-detail">
    <!-- Карусель изображений -->
    <div class="project-gallery">
        <div class="gallery-main">
            {% for image in project.images %}
            <div class="gallery-slide {% if loop.first %}active{% endif %}">
                <img src="{{ url_for('static', filename='projects/' + image) }}"
                     alt="{{ project.title }}"
                     loading="lazy">
            </div>
            {% endfor %}
        </div>

        {% if project.images|length > 1 %}
        <div class="gallery-thumbnails">
            {% for image in project.images %}
            <div class="thumbnail {% if loop.first %}active{% endif %}"
                 data-index="{{ loop.index0 }}">
                <img src="{{ url_for('static', filename='projects/' + image) }}"
                     alt="Thumbnail {{ loop.index }}">
            </div>
            {% endfor %}
        </div>

        <div class="gallery-controls">
            <button class="gallery-prev" aria-label="Previous image">‹</button>
            <div class="gallery-counter">
                <span class="current-slide">1</span> / {{ project.images|length }}
            </div>
            <button class="gallery-next" aria-label="Next image">›</button>
        </div>
        {% endif %}
    </div>

    <!-- Основная информация о проекте -->
    <div class="project-content">
        <h1>{{ project.title }}</h1>
        <p class="project-geo">{{ project.geo }}</p>

        <div class="project-meta">
            <div class="meta-item">
                <span class="meta-label">Категория:</span>
                <span class="meta-value">{{ project.category }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Пакет:</span>
                <span class="meta-value">{{ project.package }}</span>
            </div>
            <div class="meta-item">
                <span class="meta-label">Срок разработки:</span>
                <span class="meta-value">{{ project.duration }}</span>
            </div>
        </div>

        <div class="project-features">
            <h2>Функционал:</h2>
            <ul>
                {% for feature in project.features %}
                <li>
                    <svg class="feature-icon" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                    </svg>
                    <span>{{ feature }}</span>
                </li>
                {% endfor %}
            </ul>
        </div>

        {% if project.testimonial %}
        <blockquote class="project-testimonial">
            <div class="quote-icon">“</div>
            <p>{{ project.testimonial }}</p>
            <cite>{{ project.client }}</cite>
        </blockquote>
        {% endif %}

        <div class="project-actions">
            <a href="{{ project.live_url }}" target="_blank" class="btn btn--primary">
                <svg class="btn-icon" viewBox="0 0 24 24">
                    <path d="M14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3m-2 16H5V5h7V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7z"/>
                </svg>
                Посмотреть сайт
            </a>
            <a href="{{ url_for('portfolio') }}" class="btn btn--outline">
                <svg class="btn-icon" viewBox="0 0 24 24">
                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                </svg>
                Вернуться к портфолио
            </a>
        </div>
    </div>
</div>
{% endblock %}